<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Solusi untuk masalah saat migrasi server Open edX">
<meta name="keywords" content="code,edX,Django">
<meta property="og:type" content="article">
<meta property="og:title" content="SOLVE Celery error saat migrasi server Open edX">
<meta property="og:url" content="http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/index.html">
<meta property="og:site_name" content="oonlab">
<meta property="og:description" content="Solusi untuk masalah saat migrasi server Open edX">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://oonlab.com/images/logo-edx.png">
<meta property="og:updated_time" content="2019-02-26T20:08:04.531Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SOLVE Celery error saat migrasi server Open edX">
<meta name="twitter:description" content="Solusi untuk masalah saat migrasi server Open edX">
<meta name="twitter:image" content="http://oonlab.com/images/logo-edx.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>SOLVE Celery error saat migrasi server Open edX</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects_url">Projects</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/AWS/Code/2019/02/27/2016-01-19-single-bucket-access-aws/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/edX/Code/2019/02/27/2016-01-11-open-edx-bulk-email-using-mandrill/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&text=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&title=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&is_video=false&description=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=SOLVE Celery error saat migrasi server Open edX&body=Check out this article: http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&title=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&title=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&title=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&title=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&name=SOLVE Celery error saat migrasi server Open edX&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        SOLVE Celery error saat migrasi server Open edX
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ariestiyansyah</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-02-26T20:08:04.531Z" itemprop="datePublished">2019-02-27</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/edX/">edX</a> â€º <a class="category-link" href="/categories/edX/Code/">Code</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Django/">Django</a>, <a class="tag-link" href="/tags/code/">code</a>, <a class="tag-link" href="/tags/edX/">edX</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Saat ingin memindahkan instance Open edX ke server lain saya menemukan masalah dimana celery untuk membuat laporan peringkat di sistem Open edX tidak berjalan dengan semestinya, setelah saya cekcok lagi ternyata server RabbitMQ error karena user celery tidak ada alias konfigurasi di instance lama itu missing.</p>
<pre><code>$ sudo tail -f /edx/var/log/{lms,cms,nginx}/*log
==&gt; /edx/var/log/lms/edx.log &lt;==
Oct 21 02:21:16 ip-x [service_variant=lms][celery.worker.consumer][env:sandbox] ERROR [ip-x  1400] [consumer.py:364] - consumer: Cannot connect to amqp://celery:**@127.0.0.1:5672//: [Errno 104] Connection reset by peer.
Trying again in 32.00 seconds...
</code></pre><p>Dapat kita lihat pada log diatas <code>connection reset by peer</code> itu adalah masalah auth permission pada RabbitMQ server. Hal yang dapat kita lakukan untuk solving masalah ini adalah dengan membuat user celery baru di RabbitMQ server yang kita gunakan.</p>
<p>Buat user celery dengan password yang sama kita gunakan pada konfigurasi <code>lms.auth.json</code> dan <code>cms.auth.json</code> (pada contoh ini saya menggunakan user dan password celery)</p>
<pre><code>$ sudo rabbitmqctl add_user celery celery
</code></pre><p>Set permission pada user celery</p>
<pre><code>$ sudo rabbitmqctl set_permissions celery &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;
</code></pre><p>Restart RabbitMQ server</p>
<pre><code>$ sudo service rabbitmq-server restart
</code></pre><p>Restart instance</p>
<pre><code>$ sudo reboot
</code></pre><p>Masuk ke server dan cek kembali log.</p>
<pre><code>$ sudo tail -f /edx/var/log/{lms,cms,nginx}/*log
==&gt; /edx/var/log/lms/edx.log &lt;==
Oct 21 02:29:09 ip-x [service_variant=lms][celery.worker.consumer][env:sandbox] INFO [x  1483] [consumer.py:573] - mingle: sync with 2 nodes
Oct 21 02:29:09 ip-x [service_variant=lms][celery.worker.consumer][env:sandbox] INFO [ip-x  1483] [consumer.py:583] - mingle: sync complete
Oct 21 02:29:09 ip-x [service_variant=lms][celery.redirected][env:sandbox] WARNING [ip-x  1483] [log.py:282] - celery@edx.lms.core.high.ip-xready.
</code></pre><p>Jika Anda membutuhkan planning, implementation, hosting, theming, support, training, dan custom development untuk Open edX silahkan hubungi  saya di <a href="mailto:onto@valutac.com" target="_blank" rel="noopener">sini</a></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects_url">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&text=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&title=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&is_video=false&description=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=SOLVE Celery error saat migrasi server Open edX&body=Check out this article: http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&title=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&title=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&title=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&title=SOLVE Celery error saat migrasi server Open edX"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://oonlab.com/edX/Code/2019/02/27/2015-10-21-solve-celery-error-saat-migrasi-open-edx/&name=SOLVE Celery error saat migrasi server Open edX&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 Rizky Ariestiyansyah
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects_url">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
